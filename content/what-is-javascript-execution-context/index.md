---
emoji: ğŸ”ªğŸª¨
title: JavaScript ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë€
date: '2021-08-15 00:00:00'
author: JY Lee
tags: JavaScript execution_context
categories: JavaScript
---

![ìŠ‰. ìŠˆìŠ‰. ì½”ë“œë¶„ë¦¬](./images/thumbnail.png)

ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸(Execution Context)ë€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œê°€ ì‹¤í–‰ë˜ê³  ì—°ì‚°ë˜ëŠ” ë²”ìœ„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì¶”ìƒì ì¸ ê°œë…ìœ¼ë¡œ, ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤ë©´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‘ë™í•˜ê³  ìˆëŠ” ê²ƒì´ë¼ê³  ë³´ë©´ ë©ë‹ˆë‹¤.

ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë‹¤ì–‘í•œ ê°œë… ì¤‘ ê¸°ë³¸ì´ ë˜ëŠ” ê°œë…ì´ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ì´í•´í•˜ê³  ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë”©ì„ í•œë‹¤ë©´ ì½”ë“œë¥¼ ì´í•´í•  ë•Œ ë§ì€ ë„ì›€ì´ ë˜ë¦¬ë¼ ìƒê°í•©ë‹ˆë‹¤.

---

## ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸, ì™œ í•„ìš”í• ê¹Œ?

ì•ì„œ ë§í–ˆë“¯ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ í•„ìš”í•œë°, ì–´ë–»ê²Œ ì‹¤í–‰í•˜ê¸° ìœ„í•¨ì¸ì§€ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.

ì†Œí”„íŠ¸ì›¨ì–´ êµ¬í˜„ ì „ëµ ì¤‘ì— í•˜ë‚˜ëŠ” ì½”ë“œë¥¼ ì—¬ëŸ¬ ì¡°ê°(functions, modules, packages ë“±ë“±)ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë ‡ê²Œ ë¶„ë¦¬í•˜ëŠ” ì´ìœ ëŠ” ë‹¨ í•˜ë‚˜, í”„ë¡œê·¸ë¨ì˜ ë³µì¡ì„±ì„ ë¶„ë¦¬í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

ì´ì œ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ì…ì¥ì´ ì•„ë‹Œ ì½”ë“œë¥¼ í•´ì„í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ ê´€ì ì—ì„œ ìƒê°í•´ë´…ë‹ˆë‹¤. ì½”ë“œ í•´ì„ì˜ ë³µì¡ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì½”ë“œì˜ ì˜ì—­ì„ ë¶„ë¦¬í•˜ì—¬ ìœ„ì™€ ê°™ì€ ì „ëµì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë° ê·¸ê²Œ ë°”ë¡œ **ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸(Execution Context)** ì…ë‹ˆë‹¤.

functions, modules, packagesê°€ ì½”ë“œ ì‘ì„±ì˜ ë³µì¡í•¨ì„ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê²ƒ ì²˜ëŸ¼, ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë„ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì´ ì½”ë“œ í•´ì„ê³¼ ì‹¤í–‰ì˜ ë³µì¡ì„±ì„ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤.

---

## ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ì¢…ë¥˜

ì´ ì²˜ëŸ¼ ì½”ë“œ í•´ì„ê³¼ ì‹¤í–‰ì˜ ë³µì¡ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ 3ê°€ì§€ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.

### **Global Execution Context (GEC)**

ê¸€ë¡œë²Œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸(GEC)ëŠ” ë¸Œë¼ìš°ì € í˜¹ì€ (Node.jsì™€ ê°™ì€) ëŸ°íƒ€ì„ì—ì„œ ì²˜ìŒ íŒŒì¼ì„ ë¡œë“œí•˜ì—¬ í•´ì„ì„ ì‹œì‘í•  ë•Œ ìƒì„±ë˜ë©°, JS ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê¸°ë³¸ì ì¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤. í•¨ìˆ˜ë‚˜ ì˜¤ë¸Œì íŠ¸ ê°™ì€ ì½”ë“œë“¤ì€ ëª¨ë‘ GEC ë‚´ë¶€ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

ë˜í•œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ì‹±ê¸€ ì“°ë ˆë“œì´ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ê¸€ë¡œë²Œ í™˜ê²½ì—ì„œë§Œ JS ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ GECê°€ ë‘ê°œ ì´ìƒ ìƒì„±ë  ìˆœ ì—†ìŠµë‹ˆë‹¤.

### Functional Execution Context (FEC)

í•¨ìˆ˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸(FEC)ëŠ” JSì—”ì§„ì´ **í•¨ìˆ˜ í˜¸ì¶œë  ë•Œ ë§ˆë‹¤** ìƒì„±ë˜ëŠ” ì»¨í…ìŠ¤íŠ¸ë¡œ, ê°ê°ì˜ í•¨ìˆ˜ëŠ” ìì²´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ê°€ì§€ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ ê°œê°€ ì¡´ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Eval Functional Execution Context

`eval` í•¨ìˆ˜ ë‚´ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

> **ì•½ê°„ì˜ TMI**
>
> eval í•¨ìˆ˜ëŠ” ë¬¸ìì—´ë¡œëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê²Œ í•´ì£¼ëŠ” í•¨ìˆ˜ë¡œ JS ì¸í„°í”„ë¦¬í„°ê°€ ë°”ë¡œ ì½”ë“œë¥¼ ì‹¤í–‰í•´ì£¼ëŠ” ë­”ê°€ ìœ„í—˜í•œ(?) í•¨ìˆ˜ì…ë‹ˆë‹¤.
>
> - ë” ìì„¸í•œ ë‚´ìš©: [MDN Web Docs](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/eval)

---

## ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒ (Execution Context Stack)

ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì´ë€ ìŠ¤íƒ(Stack, Last in First out) ìë£Œêµ¬ì¡°ë¥¼ ì´ìš©í•˜ì—¬ ìŠ¤í¬ë¦½íŠ¸ì˜ ìƒëª…ì£¼ê¸° ë™ì•ˆ ìƒì„±ëœ ëª¨ë“  ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•˜ëŠ” í•˜ëŠ” ìŠ¤íƒì…ë‹ˆë‹¤. ì¼ì¢…ì˜ **[Call Stack](https://ko.wikipedia.org/wiki/%EC%BD%9C_%EC%8A%A4%ED%83%9D)** ì´ì£ .

ê¸°ë³¸ì ìœ¼ë¡œ GECê°€ ìŠ¤íƒì— ë§¨ ì•„ë˜ì— ì¡´ì¬í•˜ë©°, GECì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë™ì•ˆ í•¨ìˆ˜ê°€ í˜¸ì¶œ ë˜ë©´ í•´ë‹¹ í•¨ìˆ˜ì— ëŒ€í•œ FECê°€ ìƒì„±ë˜ë©´ì„œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒ ìœ„ì— í‘¸ì‹œ(push)ë˜ë©°, JSì—”ì§„ì€ ìŠ¤íƒì˜ ë§¨ ìœ„ì— ìˆëŠ” í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. í‘¸ì‹œëœ ì»¨í…ìŠ¤íŠ¸ì˜ ëª¨ë“  ì½”ë“œê°€ ì‹¤í–‰ì´ ë˜ë©´ í•´ë‹¹ ì»¨í…ìŠ¤íŠ¸ë¥¼ íŒ(pop) í•˜ê³ , ê·¸ ì•„ë˜ì— ìˆëŠ” í•¨ìˆ˜ë¥¼ ì´ì–´ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.

![1.gif](./images/1.gif)

---

## ìƒì„±ë‹¨ê³„ & ì‹¤í–‰ë‹¨ê³„

ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ 2ë‹¨ê³„ë¡œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ê³  ê° ë‹¨ê³„ë§ˆë‹¤ì˜ ì—­í• ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

1. ìƒì„±ë‹¨ê³„ (Creation phase)
2. ì‹¤í–‰ë‹¨ê³„ (Execution phase)

### ìƒì„±ë‹¨ê³„ (Creation phase)

ìƒì„±ë‹¨ê³„ëŠ” JSì—”ì§„ì´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì€ í•˜ì§€ ì•Šê³  **í˜¸ì¶œì„ í•˜ëŠ” ë‹¨ê³„**ì…ë‹ˆë‹¤. ì´ë•Œ JSì—”ì§„ì´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ë©´ì„œ ì•„ë˜ì™€ ê°™ì€ ì‘ì—…ì„ í•©ë‹ˆë‹¤.

1. í•¨ìˆ˜ì™€ ë³€ìˆ˜ë¥¼ ìœ„í•œ ë©”ëª¨ë¦¬ ê³µê°„ í™•ë³´
   1. GECì˜ ê²½ìš°, ê¸€ë¡œë²Œ ë³€ìˆ˜ ìƒì„±(ë¸Œë¼ìš°ì €ëŠ” `window` ê°ì²´, Node.jsëŠ” `global` ê°ì²´)
   2. FECì˜ ê²½ìš°, `arguments` ë³€ìˆ˜ ìƒì„±
2. ìŠ¤ì½”í”„ ì²´ì¸(scope chain) ìƒì„±
3. this ê°’: ìŠ¤ì½”í”„ ì²´ì¸ ìƒì„± í›„ thisì˜ ê°’ì„ ê²°ì •

ì•„ë˜ ê·¸ë¦¼ì„ ë³´ë©´ (GECì˜ ê²½ìš°) ìƒì„±ë‹¨ê³„ì—ì„œ ê¸€ë¡œë²Œ ë³€ìˆ˜ì™€ `this`ë¥¼ í• ë‹¹í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ ì£¼ì˜ê¹Šê²Œ ë´ì•¼í•  ê²ƒì€ ì„ ì–¸ì‹ í•¨ìˆ˜ëŠ” ë©”ëª¨ë¦¬ì— ë°°ì¹˜í•˜ê³  ë³€ìˆ˜ ì„ ì–¸ì—ëŠ” ê¸°ë³¸ê°’ `undefined`ë¥¼ í• ë‹¹í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

![Untitled](./images/Untitled-1.png)

### ì‹¤í–‰ë‹¨ê³„ (Execution phase)

ì‹¤í–‰ë‹¨ê³„ê°€ ë˜ë©´ JSì—”ì§„ì€ í•œ ì¤„ì‹ ì½”ë“œë¥¼ ì‹¤í–‰(ëŸ°íƒ€ì„) í•˜ëŠ”ë°. ì´ ë‹¨ê³„ì—ì„œ ë³€ìˆ˜ì— ê°’ì„ í• ë‹¹í•˜ê³  í•¨ìˆ˜ í˜¸ì¶œì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

![Untitled](./images/Untitled-2.png)

---

## ì—¬ê¸°ê¹Œì§€ ì˜ ì™”ëŠ”ê°€?

![Untitled](./images/not-understand.png)

ì“°ë‹¤ë³´ë‹ˆ ê¸€ì´ ì¢€ ë§ì•„ì§„ ê²ƒ ê°™ì§€ë§Œ, ì—¬ê¸°ê¹Œì§€ ì˜ ì´í•´í•˜ì…¨ë‹¤ë©´ ì´ì œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì´ ì–´ë–¤ì‹ìœ¼ë¡œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ë‚˜ëˆ„ëŠ”ì§€, ë˜ ì–´ë–»ê²Œ ì´ë¥¼ ì‹¤í–‰í•˜ëŠ”ì§€ ì•Œê²Œ ë˜ì—ˆì„ ê²ƒì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì‹¤ì œ ìš°ë¦¬ê°€ ê°œë°œì„ í•˜ë©´ì„œ ì–´ë–¤ì‹ìœ¼ë¡œ ì´ëŸ¬í•œ ê°œë…ì´ í™œìš© ë˜ëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤.

---

## í˜¸ì´ìŠ¤íŒ… (Hoisting)

> âš ï¸ **ì°¸ê³ ** âš ï¸
>
> `let`, `const` ë¡œ ì„ ì–¸ëœ ë³€ìˆ˜ëŠ” ì´ˆê¸°í™”ê°€ ë˜ê¸° ì „ì— ì ‘ê·¼í•˜ë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.

1. **ìƒì„±ë‹¨ê³„**ì—ì„œ `var` ë³€ìˆ˜ëŠ” undefined ì´ˆê¸°í™” ë˜ê³  í•¨ìˆ˜ëŠ” ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°‘ë‹ˆë‹¤.
2. ì‹¤í–‰ë‹¨ê³„ê°€ ë˜ì—ˆì„ ë•Œ, í•¨ìˆ˜ì˜ ê²½ìš°ì—ë§Œ í•¨ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šì•„ë„ í˜¸ì¶œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
   - í™”ì‚´í‘œ í•¨ìˆ˜ì— ê²½ìš°ì—ëŠ” ë³€ìˆ˜ë¡œ ì·¨ê¸‰ë˜ê¸° ë•Œë¬¸ì—, `undefined`ë¡œ ì´ˆê¸°í™” ë˜ì–´ í˜¸ì´ìŠ¤íŒ…ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```js
console.log(normalVar); // undefined
console.log(originFunc); // [Function: originFunc]

var normalVar = 'Normal';

function originFunc() {
  console.log('Origin Function');
}

console.log(normalVar); // 'Normal'
console.log(originFunc); // [Function: originFunc]

// -----

arrowFunc(); // Uncaught TypeError: arrowFunc is not a function  <-- Error!!

var arrowFunc = () => {
  console.log('Arrow Function');
};
```

---

## í´ë¡œì € (Closure) & ìŠ¤ì½”í”„ ì²´ì¸ (Scope Chain)

1. ìƒì„±ë‹¨ê³„ì—ì„œ í•¨ìˆ˜ê°€ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ê³  ë³€ìˆ˜ë“¤ì„ ì´ˆê¸°í™” í•©ë‹ˆë‹¤.
2. ì‹¤í–‰ë‹¨ê³„ê°€ ë˜ë©´ `addAndMulti`ê°€ í˜¸ì¶œë˜ê³  `value`ë¥¼ ê³„ì‚°í•œ ë’¤ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ë•Œ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— **â€œí´ë¡œì¦ˆ ìŠ¤ì½”í”„â€**ê°€ ë‚¨ì•„ ìˆëŠ” ìƒíƒœë¡œ `multi` ë³€ìˆ˜ì— í•¨ìˆ˜ê°€ í• ë‹¹ ë©ë‹ˆë‹¤.
3. `multi` ë³€ìˆ˜ì— í• ë‹¹ëœ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ `multiValue` ê°€ í˜¸ì¶œë˜ê³  í´ë¡œì¦ˆ ìŠ¤ì½”í”„ ë‚´ì—ì„œ í•¨ìˆ˜ê°€ ì‹¤í–‰ëœ í›„, ë°˜í™˜ê°’ì„ `result`ì— ì €ì¥í•˜ê³  ì¢…ë£Œê°€ ë©ë‹ˆë‹¤.

```js
function addAndMulti(num1, num2) {
  const value = num1 + num2;

  return function multiValue(num3) {
    return value * num3;
  };
}

var multi = addAndMulti(2, 3);
var result = multi(5);

console.log(result); // 25
```

---

## ì°¸ì¡°

- ì¸ë„¤ì¼ ì›ë³¸: [https://www.youtube.com/watch?v=vjasxz8wvRA](https://www.youtube.com/watch?v=vjasxz8wvRA)
- [https://ui.dev/ultimate-guide-to-execution-contexts-hoisting-scopes-and-closures-in-javascript/](https://ui.dev/ultimate-guide-to-execution-contexts-hoisting-scopes-and-closures-in-javascript/)

```toc

```
